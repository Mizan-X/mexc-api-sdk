"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fromatData = exports.isEmptyValue = exports.removeEmptyValue = exports.buildQueryString = exports.createRequest = void 0;
const sync_request_1 = __importDefault(require("sync-request"));
const createRequest = (config) => {
    const { baseURL, method, url, headers } = config;
    return (0, sync_request_1.default)(method, `${baseURL}${url}`, { headers });
};
exports.createRequest = createRequest;
const stringifyKeyValuePair = ([key, value]) => {
    return `${key}=${encodeURIComponent(value)}`;
};
const removeEmptyValue = (obj) => {
    if (!(obj instanceof Object))
        return {};
    Object.keys(obj).forEach(key => isEmptyValue(obj[key]) && delete obj[key]);
    return obj;
};
exports.removeEmptyValue = removeEmptyValue;
const isEmptyValue = (input) => {
    /**
     * input is considered empty value: falsy value (like null, undefined, '', except false and 0),
     * string with white space characters only, empty array, empty object
     */
    return (!input && input !== false && input !== 0) ||
        ((input instanceof String || typeof input === 'string') && !input.trim()) ||
        (Array.isArray(input) && !input.length) ||
        (input instanceof Object && !Object.keys(input).length);
};
exports.isEmptyValue = isEmptyValue;
const buildQueryString = (params) => {
    if (!params)
        return '';
    return Object.entries(params)
        .map(stringifyKeyValuePair)
        .join('&');
};
exports.buildQueryString = buildQueryString;
const fromatData = (datas) => {
    if (Array.isArray(datas)) {
        return datas.map((data) => {
            return fromatData(data);
        });
    }
    else if (typeof datas === "object" && datas !== null) {
        const newObj = {};
        Object.entries(datas).map(([key, value]) => newObj[key] = fromatData(value));
        return newObj;
    }
    else {
        return (datas === undefined || datas === null) ? "" : datas;
    }
};
exports.fromatData = fromatData;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZ0VBQW1DO0FBRW5DLE1BQU0sYUFBYSxHQUFHLENBQUMsTUFBVyxFQUFFLEVBQUU7SUFDbEMsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLE1BQU0sQ0FBQTtJQUNoRCxPQUFPLElBQUEsc0JBQU8sRUFBQyxNQUFNLEVBQUUsR0FBRyxPQUFPLEdBQUcsR0FBRyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFBO0FBQzNELENBQUMsQ0FBQTtBQTZDRyxzQ0FBYTtBQTNDakIsTUFBTSxxQkFBcUIsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBUSxFQUFFLEVBQUU7SUFDbEQsT0FBTyxHQUFHLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFBO0FBQ2hELENBQUMsQ0FBQTtBQUVELE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxHQUFRLEVBQUUsRUFBRTtJQUNsQyxJQUFHLENBQUMsQ0FBQyxHQUFHLFlBQVksTUFBTSxDQUFDO1FBQUUsT0FBTyxFQUFFLENBQUE7SUFDdEMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksT0FBTyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtJQUMxRSxPQUFPLEdBQUcsQ0FBQTtBQUNkLENBQUMsQ0FBQTtBQXFDRyw0Q0FBZ0I7QUFuQ3BCLE1BQU0sWUFBWSxHQUFHLENBQUMsS0FBVSxFQUFFLEVBQUU7SUFDaEM7OztPQUdHO0lBQ0gsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsS0FBSyxZQUFZLE1BQU0sSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN6RSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ3ZDLENBQUMsS0FBSyxZQUFZLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUE7QUFDL0QsQ0FBQyxDQUFBO0FBMkJHLG9DQUFZO0FBekJoQixNQUFNLGdCQUFnQixHQUFHLENBQUMsTUFBVyxFQUFFLEVBQUU7SUFDckMsSUFBSSxDQUFDLE1BQU07UUFBRSxPQUFPLEVBQUUsQ0FBQTtJQUN0QixPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1NBQzFCLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztTQUMxQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDaEIsQ0FBQyxDQUFBO0FBa0JHLDRDQUFnQjtBQWhCcEIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxLQUFVLEVBQU8sRUFBRTtJQUNuQyxJQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN0QixPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtZQUMzQixPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUMzQixDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUM7U0FBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDakQsTUFBTSxNQUFNLEdBQVEsRUFBRSxDQUFBO1FBQ3RCLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFRLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtRQUNuRixPQUFPLE1BQU0sQ0FBQztJQUN0QixDQUFDO1NBQU0sQ0FBQztRQUNKLE9BQU8sQ0FBQyxLQUFLLEtBQUssU0FBUyxJQUFJLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUE7SUFDL0QsQ0FBQztBQUNMLENBQUMsQ0FBQTtBQU9HLGdDQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlcXVlc3QgZnJvbSBcInN5bmMtcmVxdWVzdFwiO1xuXG5jb25zdCBjcmVhdGVSZXF1ZXN0ID0gKGNvbmZpZzogYW55KSA9PiB7XG4gICAgY29uc3QgeyBiYXNlVVJMLCBtZXRob2QsIHVybCwgaGVhZGVycyB9ID0gY29uZmlnXG4gICAgcmV0dXJuIHJlcXVlc3QobWV0aG9kLCBgJHtiYXNlVVJMfSR7dXJsfWAsIHsgaGVhZGVycyB9KVxufVxuXG5jb25zdCBzdHJpbmdpZnlLZXlWYWx1ZVBhaXIgPSAoW2tleSwgdmFsdWVdOiBhbnlbXSkgPT4ge1xuICAgIHJldHVybiBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gXG59XG5cbmNvbnN0IHJlbW92ZUVtcHR5VmFsdWUgPSAob2JqOiBhbnkpID0+IHtcbiAgICBpZighKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkpIHJldHVybiB7fVxuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChrZXkgPT4gaXNFbXB0eVZhbHVlKG9ialtrZXldKSAmJiBkZWxldGUgb2JqW2tleV0pXG4gICAgcmV0dXJuIG9ialxufVxuXG5jb25zdCBpc0VtcHR5VmFsdWUgPSAoaW5wdXQ6IGFueSkgPT4ge1xuICAgIC8qKlxuICAgICAqIGlucHV0IGlzIGNvbnNpZGVyZWQgZW1wdHkgdmFsdWU6IGZhbHN5IHZhbHVlIChsaWtlIG51bGwsIHVuZGVmaW5lZCwgJycsIGV4Y2VwdCBmYWxzZSBhbmQgMCksXG4gICAgICogc3RyaW5nIHdpdGggd2hpdGUgc3BhY2UgY2hhcmFjdGVycyBvbmx5LCBlbXB0eSBhcnJheSwgZW1wdHkgb2JqZWN0XG4gICAgICovXG4gICAgcmV0dXJuICghaW5wdXQgJiYgaW5wdXQgIT09IGZhbHNlICYmIGlucHV0ICE9PSAwKSB8fFxuICAgICAgICAoKGlucHV0IGluc3RhbmNlb2YgU3RyaW5nIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpICYmICFpbnB1dC50cmltKCkpIHx8XG4gICAgICAgIChBcnJheS5pc0FycmF5KGlucHV0KSAmJiAhaW5wdXQubGVuZ3RoKSB8fFxuICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBPYmplY3QgJiYgIU9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGgpXG59XG5cbmNvbnN0IGJ1aWxkUXVlcnlTdHJpbmcgPSAocGFyYW1zOiBhbnkpID0+IHtcbiAgICBpZiAoIXBhcmFtcykgcmV0dXJuICcnXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHBhcmFtcylcbiAgICAgIC5tYXAoc3RyaW5naWZ5S2V5VmFsdWVQYWlyKVxuICAgICAgLmpvaW4oJyYnKVxufVxuXG5jb25zdCBmcm9tYXREYXRhID0gKGRhdGFzOiBhbnkpOiBhbnkgPT4ge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YXMpKSB7XG4gICAgICAgIHJldHVybiBkYXRhcy5tYXAoKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21hdERhdGEoZGF0YSlcbiAgICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhcyA9PT0gXCJvYmplY3RcIiAmJiBkYXRhcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgbmV3T2JqOiBhbnkgPSB7fVxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YXMpLm1hcCgoW2tleSwgdmFsdWVdOiBhbnlbXSkgPT4gbmV3T2JqW2tleV0gPSBmcm9tYXREYXRhKHZhbHVlKSlcbiAgICAgICAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChkYXRhcyA9PT0gdW5kZWZpbmVkIHx8IGRhdGFzID09PSBudWxsKSA/IFwiXCIgOiBkYXRhc1xuICAgIH1cbn1cblxuZXhwb3J0IHtcbiAgICBjcmVhdGVSZXF1ZXN0LFxuICAgIGJ1aWxkUXVlcnlTdHJpbmcsXG4gICAgcmVtb3ZlRW1wdHlWYWx1ZSxcbiAgICBpc0VtcHR5VmFsdWUsXG4gICAgZnJvbWF0RGF0YVxufSJdfQ==